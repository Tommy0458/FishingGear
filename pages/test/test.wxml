<!-- /pages/test/test.wxml -->
<!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
<page-meta>
<navigation-bar title="æµ‹è¯•" background="#1E3A8A" color="#ffffff" back="{{true}}"></navigation-bar> 
</page-meta>


<view class="container" bindtouchstart="touchStart" bindtouchend="touchEnd">
  <!-- æ ‡é¢˜ -->
  <view class="title-box">
    <text class="title">{{testData.title}}</text>
  </view>

<!-- é—®é¢˜å†…å®¹ -->
<view class="question-content">
    <text class="question-text">{{currentQuestion.text}}</text>
</view>

<!-- é€‰é¡¹åˆ—è¡¨ -->
<view class="options-box">
    <block wx:for="{{currentQuestion.options}}" wx:key="index">
        <view 
            class="option-item {{selectedIndex === index ? 'active' : ''}}"
            bindtap="handleAutoNext"
            data-index="{{index}}">
            <text class="option-text">{{item.text}}</text>
        </view>
    </block>
</view>

<!-- æµ‹è¯•è¿›åº¦æ˜¾ç¤º -->
<view class="progress-info">
    <text class="progress-text">å½“å‰æŠ›ç«¿è¿›åº¦ï¼š{{progress}}%</text>
</view>

<!-- å¯¼èˆªæŒ‰é’® -->
<view class="nav-buttons">
    <view class="nav-btn prev-btn {{currentQuestion.id > 1 ? '' : 'disabled'}}" bindtap="goPrev">
        <text>â¬… ä¸Šä¸€é¢˜</text>
    </view>
    <view class="nav-btn next-btn {{selectedIndex !== null ? '' : 'disabled'}}" bindtap="goNext">
        <text>ä¸‹ä¸€é¢˜ â¡</text>
    </view>
</view>
  
  <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
  <!-- <view class="home-btn" bindtap="backToHome">
    <text>è¿”å›</text>
  </view> -->

  <!-- ç»“æœå¼¹çª— -->
  <view wx:if="{{showResult}}" class="result-modal">
    <view class="result-content">
      <text class="result-title">{{resultData.title || resultData.type}}</text>
      
      <!-- äººæ ¼ç”»åƒ -->
      <view class="section-container">
        <text class="section-title">ğŸ‘¤ äººæ ¼ç”»åƒ</text>
        <text class="result-desc">{{resultData.description || resultData.desc}}</text>
      </view>
      
      <!-- AIå»ºè®® -->
      <view class="section-container" wx:if="{{resultData.suggestion}}">
        <text class="section-title">ğŸ§  AIå»ºè®®</text>
        <text class="result-desc">{{resultData.suggestion}}</text>
      </view>
      
      <!-- è£…å¤‡æ¨è -->
      <view class="recommend-section">
        <text class="recommend-title">ğŸ¯ è£…å¤‡æ¨è</text>
        <block wx:if="{{resultData.equip}}">
          <text class="result-desc">{{resultData.equip}}</text>
        </block>
        <block wx:else>
          <block wx:for="{{resultData.recommend}}" wx:key="index">
            <view class="recommend-item">{{item}}</view>
          </block>
        </block>
      </view>

      <button class="result-btn" bindtap="backToHome">è¿”å›é¦–é¡µ</button>
    </view>
  </view>
</view>