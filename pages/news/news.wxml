<page-meta>
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <navigation-bar title="é’“é±¼çƒ­æœ" background="#1E3A8A" color="#ffffff" back="{{true}}"></navigation-bar>
</page-meta>

<view class="container">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <view class="header">
        <text class="title">ğŸ£ é’“é±¼çƒ­æœ</text>
        <text class="subtitle">å®æ—¶äº†è§£é’“é±¼åœˆçƒ­é—¨èµ„è®¯ï¼ˆå½“å‰ä¸´æ—¶æ•°æ®ï¼‰</text>
    </view>

    <!-- å¤©æ°”ä¿¡æ¯ -->
    <view class="weather-card" wx:if="{{weatherInfo}}">
        <view class="weather-card-inner">
            <view class="weather-info">
                <text class="weather-location">{{weatherInfo.city}}</text>
                <text class="weather-temp">{{weatherInfo.temperature}}Â°C</text>
            </view>
            <view class="weather-detail">
                <text class="weather-condition">{{weatherInfo.weather}}</text>
                <text class="weather-wind">{{weatherInfo.winddirection}}é£ {{weatherInfo.windpower}}</text>
                <text class="weather-humidity">æ¹¿åº¦ {{weatherInfo.humidity}}%</text>
                <text class="weather-date">{{weatherInfo.reporttime}}</text>
                <text class="weather-pressure" wx:if="{{weatherInfo.pressure}}">æ°”å‹ {{weatherInfo.pressure}}hPa</text>
            </view>
        </view>
    </view>

    <!-- çƒ­æœåˆ—è¡¨ -->
    <scroll-view class="news-list" scroll-y>
        <block wx:for="{{displayedNews}}" wx:key="ID">
            <view class="news-item" hover-class="news-item-hover" bindtap="viewNewsDetail" data-news="{{item}}">
                <view class="news-rank">{{index + 1}}</view>
                <view class="news-content">
                    <text class="news-title">{{item.title}}</text>
                    <view class="news-meta">
                        <text class="news-source">{{item.sitename}}</text>
                        <text class="news-views">{{item.views || item.extra}}</text>
                    </view>
                </view>
                <image wx:if="{{item.thumbnail}}" class="news-thumbnail" src="{{item.thumbnail}}" mode="aspectFill"></image>
            </view>
        </block>

        <!-- å±•å¼€æ›´å¤šæŒ‰é’® -->
        <view class="load-more" wx:if="{{hasMoreNews}}" hover-class="load-more-hover" bindtap="loadMoreNews">
            <text>å±•å¼€æ›´å¤š</text>
            <text class="arrow-down">âŒ„</text>
        </view>

        <!-- æ— æ•°æ®æç¤º -->
        <view class="no-data" wx:if="{{filteredNews.length === 0}}">
            <text>æš‚æ— ç›¸å…³çƒ­æœæ•°æ®</text>
        </view>
    </scroll-view>
    
    <!-- æµ®åŠ¨ä¸»é¡µæŒ‰é’® -->
    <view class="float-home-btn" hover-class="float-btn-hover" bindtap="navigateToHome">
        <text class="home-btn-text">ä¸»é¡µ</text>
    </view>
</view>